<!DOCTYPE html>
<html>
<head>
  <title>Visualizing Brain Imaging in Interactive 3D</title>
  <meta charset="utf-8">
  <meta name="description" content="Visualizing Brain Imaging in Interactive 3D">
  <meta name="author" content="@StrictlyStat (github: muschellij2)">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/prettify/css/hemisu-dark.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
    
</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
    <!-- END LOGO SLIDE -->
    

    <!-- TITLE SLIDE -->
    <!-- Should I move this to a Local Layout File? -->
    <slide class="title-slide segue nobackground">
      <hgroup class="auto-fadein">
        <h1>Visualizing Brain Imaging in Interactive 3D</h1>
        <h2>John Muschelli  (ENAR 2013)</h2>
        <p>@StrictlyStat (github: muschellij2)<br/>Johns Hopkins Bloomberg School of Public Health</p>
      </hgroup>
          </slide>

    <!-- SLIDES -->
      <slide class="cover" id="Cover" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <pre><code>Error: there is no package called &#39;dti&#39;
</code></pre>

<!---
<object data="./WebGL/index.html" width="600" height="400"> <embed src="./WebGL/index.html" width="600" height="400"> </embed> Error: Embedded data could not be displayed. </object>
-->

<h2>About Me</h2>

<ul>
<li><p>PhD student in Biostatistics at Johns Hopkins Bloomberg School of Public Health with <span class="black"><b>Ciprian Craniceanu</b></span></p></li>
<li><p>ScM 2010 (<span class="black"><b>Brian Caffo</b></span>) <img src="SMART_logo.png" style="width:400px; height:100px; float:right;" alt="Lot of code" ></p></li>
<li><p>Worked in fMRI/CT for last 4 years</p></li>
<li><p>Part of the <span class="black"><b>SMART group</b></span>, and ADHD-200 competition winners</p></li>
<li><p><a href="http://biostat.jhsph.edu/%7Ejmuschel/">http://biostat.jhsph.edu/~jmuschel/</a> </p></li>
<li><p>Talk hosted at <a href="https://github.com/muschellij2/ENAR_2013_Talk">https://github.com/muschellij2/ENAR_2013_Talk</a> </p></li>
</ul>

<p><img src="clear3_logo.png" style="width:125px; height:100px; float:right;" alt="Lot of code" ></p>

<p><img src="MISTIE3-LOGO.png" style="width:200px; height:100px; float:left;" alt="Lot of code" ></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>R programs used for this presentation</h2>
  </hgroup>
  <article>
    <ul>
<li><code>knitr</code> [<a href="http://yihui.name/knitr/">Xie (2013)</a> ] - compiles R code within markdown</li>
<li><code>slidify</code> [<a href="http://ramnathv.github.com/slidify/">Vaidyanathan (2012)</a> ] - makes awesome slide decks (in html)</li>
<li><code>knitcitations</code> [<a href="http://CRAN.R-project.org/package=knitcitations">Boettiger (2013)</a> ] - allows my BibTeX to cite in <code>knitr</code></li>
<li><code>RStudio</code> [<a href="http://www.rstudio.org/">RStudio (2013)</a> ] - integrated R IDE</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>3D Graphics?</h2>
  </hgroup>
  <article>
    <p><img src="3D_Hist.png" style="width:400px; height:400px; border:1px solid blue; float:left;" alt="Lot of code" ></p>

<p><img src="3D_Excel.png"  style="width:500px; height:400px; border:1px solid blue; float:right;" alt="Lot of code"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>I&#39;m not referring to 3D histograms</h2>
  </hgroup>
  <article>
    <ul>
<li>3D is not good just because of one more D</li>
<li>3D data representing 2D is still bad

<ul>
<li>No 3D Pie charts/histograms</li>
<li>See Karl Broman&#39;s <a href="http://www.biostat.wisc.edu/%7Ekbroman/topten_worstgraphs/">The top ten worst graphs</a></li>
</ul></li>
</ul>

<p><img src="figure/piechart.png" style="width:400px; height:400px" alt="plot of chunk piechart"> </p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Why care about/do imaging?</h2>
  </hgroup>
  <article>
    <ul>
<li>Non-invasive (think <span class="black">craniotomy</span>)</li>
<li><p>Potential biomarkers - early identification</p>

<ul>
<li>Lesions in MS</li>
<li>Plaques in Alzheimer&#39;s</li>
<li>White matter volume</li>
<li>Cortical thickness</li>
</ul></li>
<li><p>Outcome measures</p>

<ul>
<li>Stroke - amount of blood</li>
<li>Brain activity</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>Neuroimaging Data</h2>
  </hgroup>
  <article>
    <p><img src="movie_final.gif" style="float:right;" height=350 width=350 alt="Spinning floating brain"></p>

<p><img src="Data_pixels.png" height=308 width=600 alt="Data structure"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Neuroimaging Data</h2>
  </hgroup>
  <article>
    <p>What kind of data do we have?</p>

<ul>
<li><span class = "green"><b>Structural MRIs</b></span></li>
<li>Functional MRIs</li>
<li>Computed Tomography - <span class = "green"><b>CT</b></span></li>
<li>Diffusion Tensor Imaging (DTI)</li>
<li>Electroencephalography (EEG)</li>
<li>Positron Emission Tomography (PET)</li>
<li>etc. </li>
</ul>

<p><span class="black"><b>Visualization</b></span> and <span class="black"><b>presentation</b></span> of these data can be <span class="black"><b>improved</b></span> with the use of 3D tools.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Overall Message</h2>
  </hgroup>
  <article>
    <ul>
<li><p>3D (<span class="red"><b>neuroimaging</b></span>)  figures can be created/<span class="red"><b>exported easily</b></span></p></li>
<li><p><span class="red"><b>Standalone</b></span> objects are needed for end-users/readers</p></li>
<li><p><span class="red"><b>Webpages</b></span> are a good medium for these</p></li>
<li><p>We need to figure how to effectively incorporate into pipelines/<span class="red"><b>publications</b></span></p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>3D rendering tools out there</h2>
  </hgroup>
  <article>
    <ul>
<li><span class = 'green'>RGL</span> (R Graphics Library) [(<a href="http://CRAN.R-project.org/package=rgl">Adler &amp; Murdoch, 2013</a> )] using <code>R</code> - <a href="http://cran.r-project.org/">http://cran.r-project.org/</a></li>
<li><span class = 'green'>3D Slicer</span> - <a href="http://www.slicer.org/">http://www.slicer.org/</a> - xtk based</li>
<li>Paraview - <a href="http://www.paraview.org/">http://www.paraview.org/</a></li>
<li>Freesurfer - <a href="http://surfer.nmr.mgh.harvard.edu/">http://surfer.nmr.mgh.harvard.edu/</a></li>
<li>AFNI - <a href="http://afni.nimh.nih.gov/afni">http://afni.nimh.nih.gov/afni</a></li>
<li>MIPAV - <a href="http://mipav.cit.nih.gov/">http://mipav.cit.nih.gov/</a></li>
<li>Matlab</li>
<li><a href="http://slicedrop.com/">http://slicedrop.com/</a> - TRY THIS - xtk-based</li>
<li>Many more</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Current methods of visualizing/EDA</h2>
  </hgroup>
  <article>
    <ul>
<li>&quot;Lightbox&quot; - using image.nifti from <code>oro.nifti</code>  [<a href="http://www.jstatsoft.org/v44/i06/">Whitcher et al. (2011)</a> ] package:</li>
</ul>

<p><span class="black"><b>Read left to right like a book - down the page is down the brain</b></span></p>

<p><img src="figure/lightbox.png" alt="plot of chunk lightbox"> </p>

<!---
* Time series of individual voxels/regions of interest (ROI) <span class="black"><b>Keep 2D</b></span>
-->

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Current methods of visualizing/EDA</h2>
  </hgroup>
  <article>
    <p>Overall, most methods keep temporal or 2D spatial components fixed and vary the other. 
Using orthographic from <code>oro.nifti</code> package:</p>

<p><img src="figure/ortho.png" alt="plot of chunk ortho"> </p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>Example of 3D in <code>R</code></h2>
  </hgroup>
  <article>
    <!--->

<p><object data="./WebGL/index.html" width="800" height="600"> <embed src="./WebGL/index.html" width="800" height="600"> </embed> Error: Embedded data could not be displayed. </object>
&lt;---&gt;</p>

<iframe width="800" height="600" src="./WebGL/index.html" style="-webkit-transform:scale(0.5);-moz-transform-scale(0.5);"></iframe>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>How do I do this in <code>R</code>? - Example</h2>
  </hgroup>
  <article>
    <pre><code class="r">### read in brain image
tmp &lt;- readNIfTI(&quot;MNI152_T1_2mm_brain.nii&quot;, reorient = FALSE)
dtemp &lt;- dim(tmp)
### make the surface object - RGL renders
contour3d(tmp, x = 1:dtemp[1], y = 1:dtemp[2], z = 1:dtemp[3], level = 4500, 
    alpha = 0.15)

### this would be the ``activation&#39;&#39; or surface you want to render here
### just taking the upper WM from the template image
contour3d(tmp, level = c(8200, 8250), alpha = c(0.5, 0.8), add = TRUE, color = c(&quot;yellow&quot;, 
    &quot;red&quot;))

### add text
text3d(x = dtemp[1]/2, y = dtemp[2]/2, z = dtemp[3] * 0.98, text = &quot;Top&quot;)
text3d(x = dtemp[1] * 0.98, y = dtemp[2]/2, z = dtemp[3]/2, text = &quot;Right&quot;)

### export this to a webpage
writeWebGL_split(dir = file.path(outdir, &quot;webGL&quot;), width = 700, height = 500, 
    template = file.path(outdir, &quot;my_template.html&quot;))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Why use <code>R</code>?</h2>
  </hgroup>
  <article>
    <ul>
<li>Why choose as the main tool? </li>
<li><span class="black"><b>STATISTICS</b></span> </li>
<li><span class="black"><b>Packages</b></span> - a lot of cutting edge tools </li>
<li>Open-source</li>
<li><span class="black"><b>Reproducible</b></span> - somewhat lacking in neuroimaging</li>
<li><span class="black"><b>Scriptable</b></span></li>
<li>Exportable</li>
<li>It works (You&#39;ve seen it!)</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Markdown - Use <code>R</code>!</h2>
  </hgroup>
  <article>
    <ul>
<li>Integration into <code>knitr</code> is working - webgl hook

<ul>
<li>Exporting the html first, then embedding in html works fine</li>
<li>RStudio&#39;s default doesn&#39;t open md&#39;s over 2Mb (brain was 30Mb)</li>
</ul></li>
<li><p><code>shiny</code> integration is possible, but slow depending on system</p>

<ul>
<li>Meta-Interactive? Interactive control over interactive graphics</li>
</ul></li>
<li><p><code>slidify</code> works with it (used in this presentation)</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h2>What (I think) makes a good interactive neuroimaging figure</h2>
  </hgroup>
  <article>
    <ul>
<li>3-4D <span class="black"><b>Interactive</b></span> (move, zoom, remove/add surfaces)</li>
<li><span class="black"><b>Transparency</b></span> (opacity) - subcortical structures</li>
<li>Easy to use</li>
<li><span class="black"><b>Quick</b></span> to render (at least on user level)</li>
<li>No (or very limited) 3rd Party software</li>
<li><p><span class="black"><b>Exportable</b></span></p>

<p>(Note - current figures do not have all these qualities )</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>Moving through Space <span class="black"><b>and</b></span> Time!</h2>
  </hgroup>
  <article>
    <p><img src="238-4136_Thumbnails.png" style="width:780px; height:540px; center;" alt="Lot of code" ></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Slicer Example - WebGL export - CT Data</h2>
  </hgroup>
  <article>
    <p><video width="900" height="580" controls>
  <source src="Slicer_Example.mp4" type="video/mp4" loop="true">
</video></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>Why are we still 2D?</h2>
  </hgroup>
  <article>
    <ul>
<li><p>We do exploratory data analysis / quality control mainly only in 2D</p></li>
<li><p>Some investment in <span class="black>new software</span> - how many languages is enough!?</p></li>
<li><p>3D Figures in <span class="black>Papers/Presentations</span> are not generally accepted</p>

<ul>
<li>&quot;Nice picture, but where&#39;s the figure for the paper&quot;</li>
</ul></li>
</ul>

<!--- 
* Software exists to embed 3D in <span class="black"><b>PDF</b></span> - but not as smooth for large data (See Levine JGCS paper for misc3d)
-->

<ul>
<li>&quot;Tradition!&quot; [<a href="">Stein et al. (1964)</a> ]</li>
</ul>

<p><img src="Fiddler.gif" alt="Fiddler" height="200" width="200"></p>

<p><hr noshade size=1> Image from <a href="http://tvtropes.org/pmwiki/pmwiki.php/Theatre/FiddlerOnTheRoof?from=Main.FiddlerOnTheRoof">http://tvtropes.org/pmwiki/pmwiki.php/Theatre/FiddlerOnTheRoof?from=Main.FiddlerOnTheRoof</a></hr></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>Where&#39;s my 4D?</h2>
  </hgroup>
  <article>
    <ul>
<li>Currently <span class="black"><b>4D is not implemented</b></span> in <code>rgl</code></li>
<li>Can export multiple figures and switch back in forth like Slicer Example

<ul>
<li>Doesn&#39;t hold camera angle</li>
<li><span class="black"><b>Current research work</b></span></li>
</ul></li>
</ul>

<p><img src="Wheres-the-Beef1.jpg" alt="Fiddler" height="200" width="200"></p>

<p><hr noshade size=1> Image from <a href="http://blogs.citrix.com/2012/09/19/wheres-the-beef/wheres-the-beef-2/">http://blogs.citrix.com/2012/09/19/wheres-the-beef/wheres-the-beef-2/</a></hr></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>Conclusion</h2>
  </hgroup>
  <article>
    <ul>
<li>3D figures are <span class="black"><b>doable</b></span></li>
<li><code>R</code> has a good interface - other tools are available</li>
<li>Currently - good for internal reports/<span class="black"><b>EDA</b></span></li>
<li><span class="black"><b>Not accepted</b></span> as figures - but supplemental material</li>
<li><p><span class="black"><b>More use</b></span> - better tools and more acceptance</p></li>
<li><p>Note: Exporting can be done for all <code>rgl</code> objects, but use with <span class="black"><b>caution</b></span> - I am not condoning wild 4D exploding pie charts</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>Thanks</h2>
  </hgroup>
  <article>
    <ul>
<li>Ciprian Craniceanu and Brian Caffo - SMART Group</li>
<li>Dan Hanley - MISTIE Trial</li>
<li>Elizabeth Sweeney </li>
<li>Taki Shinohara</li>
<li>Duncan Murdoch - for rgl and exporting: otherwise I&#39;d still be presenting distorted brains</li>
<li>Those who created the tools I use without even thinking</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>Biblio</h2>
  </hgroup>
  <article>
    <p><span style="font-size:15px;"></p>

<ul>
<li>Joseph Stein, Norman Jewison,  Topol, Norma Crane, Leonard Frey, Molly Picon, Paul Mann, Oswald Morris, Sheldon Harnick, John Williams,  others,   (1964) Fiddler on the Roof.</li>
<li>Carl Boettiger,   (2013) knitcitations: Citations for knitr markdown files.  <a href="http://CRAN.R-project.org/package=knitcitations"><a href="http://CRAN.R-project.org/package=knitcitations">http://CRAN.R-project.org/package=knitcitations</a></a></li>
<li>Yihui Xie,   (2013) knitr: A general-purpose package for dynamic report generation in
R.  <a href="http://yihui.name/knitr/"><a href="http://yihui.name/knitr/">http://yihui.name/knitr/</a></a></li>
<li>Brandon Whitcher, Volker Schmid, Andrew Thornton,   (2011) Working with the {DICOM} and {NIfTI} Data Standards in {R}.  <em>Journal of Statistical Software</em>  <strong>44</strong>  (6)   1-28  <a href="http://www.jstatsoft.org/v44/i06/"><a href="http://www.jstatsoft.org/v44/i06/">http://www.jstatsoft.org/v44/i06/</a></a></li>
<li>Daniel Adler, Duncan Murdoch,   (2013) rgl: 3D visualization device system (OpenGL).  <a href="http://CRAN.R-project.org/package=rgl"><a href="http://CRAN.R-project.org/package=rgl">http://CRAN.R-project.org/package=rgl</a></a></li>
<li> RStudio,   (2013) RStudio: Integrated development environment for R (Version 0.97.320).  <a href="http://www.rstudio.org/"><a href="http://www.rstudio.org/">http://www.rstudio.org/</a></a></li>
<li>Ramnath Vaidyanathan,   (2012) slidify: Generate reproducible html5 slides from R markdown.  <a href="http://ramnathv.github.com/slidify/"><a href="http://ramnathv.github.com/slidify/">http://ramnathv.github.com/slidify/</a></a></li>
</ul>

<h2></span></h2>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>

  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
<!-- Grab CDN jQuery, fall back to local if offline -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery-1.7.min.js"><\/script>')</script>
<!-- Load Javascripts for Widgets -->
<!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script src='libraries/highlighters/prettify/js/lang-r.js'></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint ";
  }
  prettyPrint();
</script>
<!-- End Google Prettify --></html>